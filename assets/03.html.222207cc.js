import{c as s}from"./app.897a2dcd.js";import{_ as n}from"./plugin-vue_export-helper.21dcd24c.js";var a="/blogs/assets/alert_rules.91932134.png",e="/blogs/assets/pending.e7baf814.png",p="/blogs/assets/firing.102cc46f.png",t="/blogs/assets/alerts.4c13e730.png";const l={},r=s(`<h1 id="\u544A\u8B66\u89C4\u5219" tabindex="-1"><a class="header-anchor" href="#\u544A\u8B66\u89C4\u5219" aria-hidden="true">#</a> \u544A\u8B66\u89C4\u5219</h1><blockquote><p>\u5728 Prometheus \u914D\u7F6E\u6709\u4E09\u5927\u5757\u914D\u7F6E\uFF0C\u5168\u5C40\u914D\u7F6E\u3001\u544A\u8B66\u89C4\u5219\u914D\u7F6E\u3001\u6293\u53D6\u4EFB\u52A1\u914D\u7F6E</p></blockquote><blockquote><p>\u5176\u4E2D\u544A\u8B66\u89C4\u5219\u914D\u7F6E\u5728 Prometheus \u914D\u7F6E\u4E2D\u5C5E\u4E8E\u91CD\u8981\u7684\u4E00\u5757</p></blockquote><h2 id="\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u793A\u4F8B" aria-hidden="true">#</a> \u793A\u4F8B</h2><p>first_rules.yml</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">groups</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> example <span class="token comment"># \u8FD9\u4E00\u7EC4\u7684\u544A\u8B66\u89C4\u5219\u540D\u79F0</span>
    <span class="token key atrule">rules</span><span class="token punctuation">:</span>
      <span class="token comment"># \u8FD9\u6761\u544A\u8B66\u89C4\u5219\u7684\u610F\u601D\u662F\u76EE\u6807\u5B9E\u4F8B\u5DF2\u7ECF\u6301\u7EED5\u5206\u949F\u79BB\u7EBF\u4E86(0 \u4EE3\u8868\u79BB\u7EBF 1 \u4EE3\u8868\u5728\u7EBF)</span>
      <span class="token punctuation">-</span> <span class="token key atrule">alert</span><span class="token punctuation">:</span> InstanceDown <span class="token comment"># \u544A\u8B66\u540D\u79F0</span>
        <span class="token key atrule">expr</span><span class="token punctuation">:</span> up == 1 <span class="token comment"># PromQL\u8868\u8FBE\u5F0F</span>
        <span class="token key atrule">for</span><span class="token punctuation">:</span> 5m <span class="token comment"># \u6301\u7EED\u65F6\u95F4</span>
        <span class="token key atrule">labels</span><span class="token punctuation">:</span> <span class="token comment"># \u5141\u8BB8\u9644\u52A0\u5230\u544A\u8B66\u4E0A\u7684\u4E00\u7EC4\u6807\u7B7E</span>
          <span class="token key atrule">severity</span><span class="token punctuation">:</span> page
        <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
          <span class="token key atrule">summary</span><span class="token punctuation">:</span> <span class="token string">&quot;Instance {{ $labels.instance }} down&quot;</span> <span class="token comment"># \u544A\u8B66\u6982\u8FF0</span>
          <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">&quot;{{ $labels.instance }} of job {{ $labels.job }} has been down for more than 5 minutes.&quot;</span> <span class="token comment"># \u544A\u8B66\u63CF\u8FF0(\u66F4\u52A0\u8BE6\u7EC6)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>\u5728 Prometheus \u4E2D\u4F53\u73B0\u5982\u56FE</p><p><img src="`+a+`" alt=""></p><h2 id="\u68C0\u67E5\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u68C0\u67E5\u914D\u7F6E" aria-hidden="true">#</a> \u68C0\u67E5\u914D\u7F6E</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> prometheus-2.40.1.darwin-arm64
./promtool check rules first_rules.yml
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="\u544A\u8B66\u72B6\u6001" tabindex="-1"><a class="header-anchor" href="#\u544A\u8B66\u72B6\u6001" aria-hidden="true">#</a> \u544A\u8B66\u72B6\u6001</h2><blockquote><p>\u8FD9\u91CC\u7684\u544A\u8B66\u72B6\u6001\u662F Prometheus \u4FA7\u7684\uFF0C\u5728 Prometheus \u4F53\u7CFB\u4E2D\uFF0C\u771F\u6B63\u53D1\u9001\u544A\u8B66\u4FE1\u606F\u662F Alertmanager \u63A5\u7BA1\u7684</p></blockquote><ul><li><p>inactive \u975E\u6D3B\u52A8\u72B6\u6001\uFF0C\u8868\u793A\u6B63\u5728\u76D1\u63A7\uFF0C\u4F46\u662F\u8FD8\u672A\u6709\u4EFB\u4F55\u8B66\u62A5\u89E6\u53D1</p></li><li><p>pending \u544A\u8B66\u5DF2\u7ECF\u89E6\u53D1\uFF0C\u4F46\u662F\u8FD8\u9700\u8981\u7B49\u5F85 For \u65F6\u95F4\uFF0C\u624D\u4F1A\u5C06\u544A\u8B66\u72B6\u6001\u8F6C\u6362\u4E3A firing</p></li></ul><p><img src="`+e+'" alt=""></p><ul><li>firing \u771F\u6B63\u7684\u544A\u8B66\uFF0C\u5C06\u544A\u8B66\u53D1\u9001\u7ED9 Alertmanager</li></ul><p><img src="'+p+'" alt=""></p><h2 id="\u67E5\u770B\u544A\u8B66" tabindex="-1"><a class="header-anchor" href="#\u67E5\u770B\u544A\u8B66" aria-hidden="true">#</a> \u67E5\u770B\u544A\u8B66</h2><p>\u5728 Prometheus UI \u4E2D</p><p><img src="'+t+'" alt=""></p>',19);function o(c,i){return r}var b=n(l,[["render",o]]);export{b as default};
