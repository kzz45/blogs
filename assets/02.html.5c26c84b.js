import{r as o,o as s,a as i,b as e,d as t,F as l,e as a,c as n}from"./app.897a2dcd.js";import{_ as c}from"./plugin-vue_export-helper.21dcd24c.js";var h="/blogs/assets/monitor_mindmap.8412a0bd.png",d="/blogs/assets/oma_dashboard_list.1ddf460e.png",p="/blogs/assets/oma_alert_wall.add99d34.png",_="/blogs/assets/oma_silence_config.d5ab4e34.png",m="/blogs/assets/alertmanager_silence_config_1.f307866d.png",b="/blogs/assets/alertmanager_silence_config_2.d152072c.png",u="/blogs/assets/oma_malfunction.f00c8b06.png",g="/blogs/assets/oma_instance.dc5621d5.png",f="/blogs/assets/oma_prometheus_basic_job.6e12e789.png",k="/blogs/assets/oma_prometheus_business_job.ce6ea77a.png",x="/blogs/assets/oma_prometheus_probe_job.2bbcb4a4.png",q="/blogs/assets/oma_alert_rules.25190931.png",v="/blogs/assets/oma_alert_route.d9637702.png",A="/blogs/assets/oma_receiver.7347270b.png";const S={},P=e("h1",{id:"\u6574\u4F53\u4ECB\u7ECD",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u6574\u4F53\u4ECB\u7ECD","aria-hidden":"true"},"#"),a(" \u6574\u4F53\u4ECB\u7ECD")],-1),B=e("h2",{id:"\u7528\u5230\u7684\u5F00\u6E90\u8F6F\u4EF6",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u7528\u5230\u7684\u5F00\u6E90\u8F6F\u4EF6","aria-hidden":"true"},"#"),a(" \u7528\u5230\u7684\u5F00\u6E90\u8F6F\u4EF6")],-1),L={href:"https://thanos.io/",target:"_blank",rel:"noopener noreferrer"},N=a("Thanos"),R={href:"https://grafana.com/grafana/download",target:"_blank",rel:"noopener noreferrer"},j=a("Grafana"),E={href:"https://prometheus.io/docs/prometheus/latest/getting_started/",target:"_blank",rel:"noopener noreferrer"},I=a("Prometheus"),M={href:"https://prometheus.io/docs/alerting/latest/alertmanager/",target:"_blank",rel:"noopener noreferrer"},V=a("Alertmanager"),C={href:"https://github.com/prometheus/node_exporter",target:"_blank",rel:"noopener noreferrer"},G=a("node_exporter"),K=n('<h2 id="\u8111\u56FE" tabindex="-1"><a class="header-anchor" href="#\u8111\u56FE" aria-hidden="true">#</a> \u8111\u56FE</h2><p><img src="'+h+'" alt="\u76D1\u63A7\u7CFB\u7EDF\u67B6\u6784\u56FE"></p><h2 id="\u76D1\u63A7\u903B\u8F91" tabindex="-1"><a class="header-anchor" href="#\u76D1\u63A7\u903B\u8F91" aria-hidden="true">#</a> \u76D1\u63A7\u903B\u8F91</h2><ol><li>\u670D\u52A1\u7AEF\u914D\u7F6E Prometheus \u91C7\u96C6\u76EE\u6807(\u673A\u5668\u3001K8S\u3001Redis\u3001MySQL \u7B49\u7B49)</li><li>\u670D\u52A1\u7AEF\u914D\u7F6E Prometheus Jobs \u91C7\u96C6\u4EFB\u52A1</li><li>\u670D\u52A1\u7AEF\u914D\u7F6E Alertmanager Alert Rules \u544A\u8B66\u89C4\u5219</li><li>\u670D\u52A1\u7AEF\u914D\u7F6E Alertmanager Route \u8DEF\u7531\u8F6C\u53D1\u89C4\u5219</li><li>\u4EE3\u7406\u7AEF(Prometheus \u8282\u70B9)\u5B9A\u65F6\u83B7\u53D6\u91C7\u96C6\u76EE\u6807\u3001\u91C7\u96C6\u4EFB\u52A1\u3001\u544A\u8B66\u89C4\u5219\uFF0C\u5E76\u6E32\u67D3\u914D\u7F6E\u6587\u4EF6</li><li>\u4EE3\u7406\u7AEF(Alertmanager \u8282\u70B9)\u5B9A\u65F6\u83B7\u53D6\u8DEF\u7531\u8F6C\u53D1\u89C4\u5219\uFF0C\u5E76\u6E32\u67D3\u914D\u7F6E\u6587\u4EF6</li><li>\u4EE3\u7406\u7AEF(NoticeServer)\u6839\u636E Alertmanager \u7684\u544A\u8B66\uFF0C\u53D1\u9001\u7ED9\u76EE\u6807\u7528\u6237</li><li>\u5BA2\u6237\u7AEF(\u81EA\u7814\u5C01\u88C5 node exporter \u7B49)\u63D0\u4F9B metrics \u4FE1\u606F</li><li>\u4EE3\u7406\u7AEF(Prometheus \u8282\u70B9)\u6839\u636E\u91C7\u96C6\u76EE\u6807\uFF0C\u53BB\u6293\u53D6\u91C7\u96C6\u76EE\u6807\u7684 metrics \u4FE1\u606F</li></ol><h2 id="\u524D\u7AEF\u5C55\u793A" tabindex="-1"><a class="header-anchor" href="#\u524D\u7AEF\u5C55\u793A" aria-hidden="true">#</a> \u524D\u7AEF\u5C55\u793A</h2><h3 id="\u5927\u76D8\u5217\u8868" tabindex="-1"><a class="header-anchor" href="#\u5927\u76D8\u5217\u8868" aria-hidden="true">#</a> \u5927\u76D8\u5217\u8868</h3><blockquote><p>\u63D0\u4F9B\u4EA7\u54C1\u89C6\u89D2\u7684 Grafana \u56FE\u6807\uFF0C\u5FEB\u901F\u8FDB\u5165\u67D0\u4E2A\u4EA7\u54C1\u7684 Grafana \u89C6\u56FE\u67E5\u770B\u76D1\u63A7\u6307\u6807\u5B9E\u65F6\u72B6\u6001\u3002</p></blockquote><p><img src="'+d+'" alt="\u5927\u76D8\u5217\u8868"></p><h3 id="\u76D1\u63A7\u5927\u5C4F" tabindex="-1"><a class="header-anchor" href="#\u76D1\u63A7\u5927\u5C4F" aria-hidden="true">#</a> \u76D1\u63A7\u5927\u5C4F</h3><blockquote><p>\u663E\u793A\u67D0\u4E2A\u4EA7\u54C1\u4E0B\u7684\u6B63\u5728\u53D1\u751F\u7684\u544A\u8B66(\u544A\u8B66\u6570\u91CF)\uFF0C\u5177\u4F53\u7684\u544A\u8B66\u4FE1\u606F\u53EF\u4EE5\u70B9\u51FB\u67E5\u770B\uFF0C\u53EF\u4EE5\u9488\u5BF9\u544A\u8B66\u914D\u7F6E\u7EF4\u62A4\u65F6\u95F4\u7B49\u3002</p></blockquote><p><img src="'+p+'" alt="\u76D1\u63A7\u5927\u5C4F"></p><h3 id="\u544A\u8B66\u7EF4\u62A4" tabindex="-1"><a class="header-anchor" href="#\u544A\u8B66\u7EF4\u62A4" aria-hidden="true">#</a> \u544A\u8B66\u7EF4\u62A4</h3><blockquote><p>\u663E\u793A\u4E86\u544A\u8B66\u7EF4\u62A4\u7684\u7EF4\u62A4\u7B56\u7565\u5217\u8868\uFF0C\u53EF\u4EE5\u67E5\u770B\u5177\u4F53\u7684\u544A\u8B66\u7EF4\u62A4\u7B56\u7565\uFF0C\u53EF\u4EE5\u65B0\u589E\u544A\u8B66\u7EF4\u62A4\u7B56\u7565\uFF0C\u5F53\u7136\u5728\u544A\u8B66\u5927\u5C4F\u4E2D\u7684\u3010\u5FEB\u901F\u7EF4\u62A4\u3011\u4E5F\u4F1A\u663E\u793A\u5728\u8FD9\u91CC\u3002\u8FD9\u91CC\u7684\u7EF4\u62A4\u7B56\u7565\u5176\u5B9E\u5C31\u662F\u539F\u751F\u7684 Alertmanager \u7684 Silences\u3002</p></blockquote><p><img src="'+_+'" alt="\u544A\u8B66\u7EF4\u62A4"></p><blockquote><p>\u539F\u751F Alertmanager \u7684 Silence \u914D\u7F6E\u662F\u8FD9\u6837\u7684</p></blockquote><p><img src="'+m+'" alt="alertmanager silence config step 1"><img src="'+b+'" alt="alertmanager silence config step 2"></p><h3 id="\u544A\u8B66\u6545\u969C" tabindex="-1"><a class="header-anchor" href="#\u544A\u8B66\u6545\u969C" aria-hidden="true">#</a> \u544A\u8B66\u6545\u969C</h3><blockquote><p>\u544A\u8B66\u5217\u8868\u8BB0\u5F55\u5F53\u524D\u6B63\u5728\u53D1\u751F\u548C\u5386\u53F2\u91CC\u7684\u544A\u8B66\u9879\uFF0C\u4E8B\u6545\u5217\u8868\u8BB0\u5F55\u7684\u662F\u5DF2\u7ECF\u53D1\u751F\u5E76\u5904\u7406\u8FC7\u7684\u544A\u8B66\u4E8B\u6545\uFF0C\u4E3B\u8981\u7528\u4E8E\u590D\u76D8\u8BB0\u5F55\u3002</p></blockquote><p><img src="'+u+'" alt="\u544A\u8B66\u6545\u969C"></p><h3 id="\u76D1\u63A7\u5BF9\u8C61" tabindex="-1"><a class="header-anchor" href="#\u76D1\u63A7\u5BF9\u8C61" aria-hidden="true">#</a> \u76D1\u63A7\u5BF9\u8C61</h3><blockquote><p>\u76D1\u63A7\u5BF9\u8C61\uFF0C\u8FD9\u91CC\u662F\u6211\u4EEC\u5B9A\u4E49\u7684\u76D1\u63A7\u76EE\u6807\uFF0C\u53EF\u4EE5\u662F ECS \u4E3B\u673A\uFF0CK8S \u96C6\u7FA4\uFF0CRedis\u3001MySQL\u3001MongoDB\u3001\u57DF\u540D\u3001IP\u3002</p></blockquote><ul><li>\u673A\u5668\u9ED8\u8BA4\u4ECE CMDB \u540C\u6B65\u8FDB\u5165\u76D1\u63A7\u7CFB\u7EDF\uFF0C\u5E76\u5206\u914D\u6807\u7B7E</li><li>\u673A\u5668\u7684\u76D1\u63A7\u9ED8\u8BA4\u901A\u8FC7\u5185\u7F51 IP \u53BB\u8BFB\u53D6 metrics \u4FE1\u606F\uFF0C\u4E5F\u53EF\u4EE5\u914D\u7F6E\u4ECE\u5916\u7F51\u8BFB\u53D6</li><li>\u53EF\u4EE5\u9488\u5BF9\u673A\u5668\u8BBE\u7F6E\u4E0D\u76D1\u63A7</li><li>\u53EF\u4EE5\u76F4\u63A5\u70B9\u51FB\u67E5\u770B\u673A\u5668\u7684\u76D1\u63A7\u56FE</li></ul><p><img src="'+g+'" alt=""></p><h3 id="\u76D1\u63A7\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u76D1\u63A7\u914D\u7F6E" aria-hidden="true">#</a> \u76D1\u63A7\u914D\u7F6E</h3><blockquote><p>\u76D1\u63A7\u914D\u7F6E\u662F\u76D1\u63A7\u7CFB\u7EDF\u4E2D\u6700\u91CD\u8981\u7684\u4E00\u5757\uFF0C\u4E3B\u8981\u5206\u76D1\u63A7\u4EFB\u52A1\u3001\u544A\u8B66\u89C4\u5219\u3001\u544A\u8B66\u8DEF\u7531\u548C\u901A\u77E5\u7EC4\u3002</p></blockquote><h4 id="\u76D1\u63A7\u4EFB\u52A1" tabindex="-1"><a class="header-anchor" href="#\u76D1\u63A7\u4EFB\u52A1" aria-hidden="true">#</a> \u76D1\u63A7\u4EFB\u52A1</h4><blockquote><p>\u76D1\u63A7\u4EFB\u52A1\u4E5F\u5C31\u662F\u5BF9\u5E94 Prometheus \u4E2D\u7684 job\uFF0C\u5173\u4E8E\u544A\u8B66\u4EFB\u52A1\uFF0C\u6211\u4EEC\u5B9A\u4E49\u4E86\u4E09\u79CD\uFF1A\u57FA\u7840\u4EFB\u52A1\u3001\u4E1A\u52A1\u4EFB\u52A1\u548C\u63A2\u6D4B\u4EFB\u52A1\u3002\u5176\u4E2D\u8981\u8BF4\u660E\u7684\u662F\u4E1A\u52A1\u4EFB\u52A1\u5C31\u662F\u4E1A\u52A1\u65B9\u63D0\u4F9B\u7684 metrics \u7684 URL \u5730\u5740\uFF0C\u63A2\u6D4B\u4EFB\u52A1\u5C31\u662F\u901A\u8FC7 blackbox exporter \u6765\u5B9E\u73B0\uFF0C\u5C31\u662F http \u63A2\u6D4B\u3001icmp \u63A2\u6D4B\u3001tcp \u63A2\u6D4B\u3002</p></blockquote><ul><li><p>\u57FA\u7840\u4EFB\u52A1(\u673A\u5668\u3001K8S\u3001\u8FDB\u7A0B\u3001\u7AEF\u53E3\u57FA\u7840\u4EFB\u52A1)</p><p><img src="'+f+'" alt=""></p></li><li><p>\u4E1A\u52A1\u4EFB\u52A1</p><p><img src="'+k+'" alt=""></p></li><li><p>\u63A2\u6D4B\u4EFB\u52A1(\u57DF\u540D\u3001icmp\u3001tcp \u63A2\u6D4B\u4EFB\u52A1)</p><p><img src="'+x+'" alt=""></p></li></ul><h4 id="\u544A\u8B66\u89C4\u5219" tabindex="-1"><a class="header-anchor" href="#\u544A\u8B66\u89C4\u5219" aria-hidden="true">#</a> \u544A\u8B66\u89C4\u5219</h4><blockquote><p>\u544A\u8B66\u89C4\u5219\uFF0C\u5BF9\u5E94 Prometheus \u4E2D\u7684 alert rule\u3002\u8FD9\u91CC\u9700\u8981\u8BF4\u660E\u7684\u662F\uFF0C\u6BCF\u4E00\u6761\u544A\u8B66\u89C4\u5219\u90FD\u53EF\u4EE5\u6709\u5B83\u7684\u544A\u8B66\u5B50\u89C4\u5219\uFF0C\u56E0\u4E3A\u544A\u8B66\u9ED8\u8BA4\u7684\u544A\u8B66\u89C4\u5219\u662F\u515C\u5E95\u7684\u89C4\u5219\uFF0C\u5982\u679C\u4E1A\u52A1\u65B9\u9700\u8981\u544A\u8B66\u89C4\u5219\u7684\u9608\u503C\u8C03\u6574\uFF0C\u5C31\u53EF\u4EE5\u6DFB\u52A0\u544A\u8B66\u5B50\u89C4\u5219\u3002</p></blockquote><p><img src="'+q+'" alt=""></p><h4 id="\u544A\u8B66\u8DEF\u7531" tabindex="-1"><a class="header-anchor" href="#\u544A\u8B66\u8DEF\u7531" aria-hidden="true">#</a> \u544A\u8B66\u8DEF\u7531</h4><blockquote><p>\u544A\u8B66\u8DEF\u7531\uFF0C\u5BF9\u5E94 Alertmanager \u4E2D\u7684 route\u3002\u8FD9\u91CC\u8981\u8BF4\u660E\u7684\u662F\uFF0C\u6BCF\u4E2A\u4EA7\u54C1\u4E0B\u90FD\u4F1A\u6709\u4E00\u6761\u515C\u5E95\u7684\u544A\u8B66\u8DEF\u7531\uFF0C\u4E5F\u5C31\u662F\u5F53\u524D\u4EA7\u54C1\u7684\u6240\u6709\u544A\u8B66\u90FD\u9ED8\u8BA4\u53D1\u9001\u7ED9\u5F53\u524D\u4EA7\u54C1\u7684\u8FD0\u7EF4\u4EBA\u5458\u3002\u5F53\u7136\u5982\u679C\u5F53\u524D\u4EA7\u54C1\u4E0B\u4E0D\u540C\u7684\u544A\u8B66\u53D1\u9001\u7ED9\u4E0D\u540C\u7684\u8D1F\u8D23\u4EBA\uFF0C\u5C31\u9700\u8981\u6DFB\u52A0\u544A\u8B66\u5B50\u8DEF\u7531\u3002</p></blockquote><p><img src="'+v+'" alt=""></p><h4 id="\u544A\u8B66\u901A\u77E5" tabindex="-1"><a class="header-anchor" href="#\u544A\u8B66\u901A\u77E5" aria-hidden="true">#</a> \u544A\u8B66\u901A\u77E5</h4><blockquote><p>\u544A\u8B66\u901A\u77E5\uFF0C\u5BF9\u5E94 Alertmanager \u4E2D\u7684 receiver\u3002\u544A\u8B66\u901A\u77E5\u7EC4\u5C31\u662F\u8C01\u9700\u8981\u63A5\u6536\u544A\u8B66\u4FE1\u606F\u3002\u76EE\u524D\u6211\u4EEC\u7684\u544A\u8B66\u901A\u77E5\u6E20\u9053\u662F\u98DE\u4E66\u3002</p></blockquote><p><img src="'+A+'" alt=""></p>',37);function w(y,D){const r=o("ExternalLinkIcon");return s(),i(l,null,[P,B,e("ul",null,[e("li",null,[e("a",L,[N,t(r)])]),e("li",null,[e("a",R,[j,t(r)])]),e("li",null,[e("a",E,[I,t(r)])]),e("li",null,[e("a",M,[V,t(r)])]),e("li",null,[e("a",C,[G,t(r)])])]),K],64)}var T=c(S,[["render",w]]);export{T as default};
