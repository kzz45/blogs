# 运维对账

我们的资源基本上都是在阿里云上的，ECS、RDS、Redis、SLB、K8S、OSS等等

并且资源在阿里云上也是多账户的，主要资源都是在主账户下，部分资源在子账户下

在今年以来，由于收入的减少，公司层面就会要削减成本，（之前我们是从来不关心花费的，主要是收入很可观）运维的工作就是进行资源降配

但是在升降配的过程中，我们到底减少了多少费用，具体到项目上，能给项目减少多少成本，这个在最初是算不出来的

因为阿里云的账单是针对资源类别的，就是说每个月，比如ECS花费了多少是知道的，但是具体到每个项目，就不太好算

为什么算不出来？

首先资源的名称并没有进行统一的管理，也就是说这个资源具体是谁，哪个项目组在用，其实是不知道的

其次一些公共资源，比如OSS、SLB、日志服务、K8S、DDos防护等资源，这些是不好拆分的

那么我们首先需要做的就是给资源的名称划定规范，比如类似：tsh-plat-charge-0001

tsh：代表阿里云上海

plat：代表的是平台项目组

charge：代表的是平台项目组的充值模块

0001：代表的是资源的编号

这样一来我们就会知道这个资源是在阿里云上、用于平台项目组的充值业务

最后我们再从阿里云的明细账单中拉出上个月的账单明细，针对实例ID和我们的资源名称一对一的关联上，这样就能算出每个项目组的花费了

但是，这样做的意义何在？

你只是知道了每个项目组的花费，而且账单还是延后的，也就是说这个月初才能算出上个月的花费，给到的信息都是延后的

假如运维人员根据监控信息（使用率等），哼哧哼哧的将项目组的资源进行了降配，减少了费用，也是在下个月才能体现出来（根据计算结果）

并不能说，在进行这个动作之前，我们预期会给项目组带来多少的收益（减少成本会增加收益率），那么你的价值似乎就没那么高了

我们要怎么做？

1、统一资源购买入口，在最开始的时候就划定好资源分配（哪个项目组在用）

2、监控资源的使用率，如果使用率一直都很低，进行降配

4、需要落地一个预算系统，项目组预先知道会使用多少资源，相应的会计算出资源费用

入口划定了规范

预算系统划定了提前预期

监控系统划定了可升降配空间

还有待思考
